#!/usr/bin/env bash

# Created By: Javier Pacheco - javier@jpacheco.xyz
# Created On: 14/07/24
# Project: Dynamic gaps for hyprland.

# Reads the default set of your config file
# set the path to your configuration file
config="$HOME/.config/hypr/src/general.conf"
gaps_out="$(grep "^\s*gaps_out" $config | awk '{print $3}')"
[ -z "$def_gaps_out" ] && def_gaps_out=10
gaps_in="$(grep  "^\s*gaps_in"  $config | awk '{print $3}')"
[ -z "$def_gaps_in" ]  && def_gaps_in=5

number_to_add=2

# Get the actual gap size:
out_gap=$(hyprctl getoption general:gaps_out | grep custom | awk '{print $3}')
in_gap=$(hyprctl getoption general:gaps_in | grep custom | awk '{print $5}')

pgaps_out=$((out_gap + number_to_add))
pgaps_in=$((in_gap + number_to_add))
lgaps_out=$((out_gap - number_to_add))
lgaps_in=$((in_gap - number_to_add))

function inc_gaps () {
  hyprctl --batch "keyword general:gaps_out $pgaps_out ; keyword general:gaps_in $pgaps_in"
}

function dec_gaps () {
  hyprctl --batch "keyword general:gaps_out $lgaps_out ; keyword general:gaps_in $lgaps_in"
}

function restore_gaps () {
  hyprctl --batch "keyword general:gaps_out $gaps_out ; keyword general:gaps_in $gaps_in"
}

case $1 in
  -i) inc_gaps;;
  -d) dec_gaps;;
  -r) restore_gaps;;
  *)  exit 1 ;;
esac
